@mixin light {
  @include scope(theme-light) {@content}
}

@mixin dark {
  @include scope(theme-dark) {@content}
}

@mixin scope($class) {
  @if & {
    html.#{$class} & {@content}
  } @else {
    html.#{$class} {@content}
  }
}

@mixin both {
  /**
   * The dark() and light() mixins increase selector specificity.
   * In some cases, it's necessary to apply a common style to both
   * themes, overriding a previously defined style.
   * For that we need to artificially elevate the specificity 
   * of the style, without actually changing any style.
   */
  @if & {
    html.theme-light &, html.theme-dark & {@content}
  } @else {
    html.theme-light, html.theme-dark {@content}
  }
}

@mixin property($property, $light, $dark) {
  @include light {#{$property}: $light}
  @include dark {#{$property}: $dark}
}

@mixin var($property, $themeMap) {
  @include property($property, map-get($themeMap, 'light'), map-get($themeMap, 'dark'));
}

@mixin color-theme($light, $dark) {
  @include property(color, $light, $dark);
}

@mixin background($light, $dark) {
  @include property(background, $light, $dark);
}

// Deprecated
@mixin background-theme($light, $dark) {
  @include background($light, $dark)
}

@mixin theme {
  @include both {@content}
}
