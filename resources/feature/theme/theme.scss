@mixin light {
  @include scope(theme-light) {
    @content;
  }
}

@mixin dark {
  @include scope(theme-dark) {
    @content;
  }
}

@mixin scope($class) {
  @if & {
    html.#{$class} & {
      @content;
    }
  } @else {
    body.#{$class} {
      @content;
    }
  }
}

@mixin theme {
  /**
   * The dark() and light() mixins increase selector specificity.
   * In some cases, it's necessary to apply a common style to both
   * themes, overriding a previously defined style. 
   * Thus, we need to artificially elevate the specificity 
   * of the style, without actually changing any style.
   */
  html.theme-light &,
  html.theme-dark &,
  {
    @content;
  }
}

@mixin property($property, $light, $dark) {
  @include light {
    #{$property}: $light;
  }
  @include dark {
    #{$property}: $dark;
  }
}

@mixin color-theme($light, $dark) {
  @include property(color, $light, $dark);
}

@mixin background($light, $dark) {
  @include property(background, $light, $dark);
}

// Deprecated
@mixin background-theme($light, $dark) {
  @include background($light, $dark)
}
