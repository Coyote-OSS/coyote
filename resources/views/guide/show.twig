{% extends 'layout' %}

{% block title %}{{ guide.title }}{{ parent() }}{% endblock %}

{% block container %}
  <div class="row mt-1">
    <div class="col-lg-2">
      {% include 'guide.partials.filter' %}
    </div>

    <div id="js-guide" class="col-lg-7">
      <vue-post></vue-post>

      <h4 v-if="isAuthorized || commentsCount" class="mt-2 mb-2">Komentarze</h4>

      <vue-comment-form
        v-if="isAuthorized"
        resource-id="{{ guide.id }}"
        resource="Coyote\Guide"
      ></vue-comment-form>

      <div v-if="commentsCount > 0" class="card card-default">
        <div class="card-body">
          <vue-comment
            v-for="comment in comments"
            :comment="comment"
            :key="comment.id"
          />
        </div>
      </div>

      <vue-notifications position="bottom right"/>
    </div>
  </div>

  <script>
    var guide = {{ guide|json_encode|raw }};
  </script>
{% endblock %}
